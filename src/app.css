:root {
    --color-primary: #00639b;
    --color-sunday: #d32f2f; /* Röd för light mode */
    
    /* Default (Light Mode) */
    --bg-body: #ffffff;
    --bg-card: #ffffff;
    --bg-input: #f5f5f5;
    --text-main: #333333;
    --text-muted: #666666;
    --border-color: rgba(0,0,0,0.1);

    /* Månadsbakgrunder (Light) */
    --month-even: rgba(0, 0, 0, 0.03); /* Mycket svag grå */
    --month-odd: rgba(0, 0, 0, 0.0);     /* Transparent/Vit */
    --month-stroke: rgba(0, 0, 0, 0.1);
}

/* Dark Mode Override */
body.dark-mode {
    --bg-body: #121212;
    --bg-card: #1e1e1e;
    --bg-input: #2c2c2c;
    --text-main: #e0e0e0;
    --text-muted: #a0a0a0;
    --border-color: rgba(255,255,255,0.1);
    
    --color-sunday: #ef5350; /* Ljusare röd för dark mode läsbarhet */

    /* Månadsbakgrunder (Dark) */
    --month-even: rgba(255, 255, 255, 0.03); /* Mycket svag ljusning */
    --month-odd: rgba(0, 0, 0, 0);
    --month-stroke: rgba(255, 255, 255, 0.15);

    background: var(--bg-body);
    color: var(--text-main);
}

/* Base Styles */
body { 
    margin: 0; 
    font-family: 'Roboto', sans-serif; 
    overflow: hidden; 
    background: var(--bg-body); 
    color: var(--text-main);
    transition: background 0.3s, color 0.3s; 
}

.modal-card, .settings-panel { background: var(--bg-card) !important; color: var(--text-main) !important; }
.unified-input { background: var(--bg-input) !important; color: var(--text-main) !important; border-color: var(--border-color) !important; }
.title-bar { background: var(--bg-card) !important; border-bottom: 1px solid var(--border-color) !important; }
.app-title { color: var(--text-main) !important; }

.scroll-view {
    height: 100dvh; 
    overflow-x: auto; 
    overflow-y: hidden;
    scroll-snap-type: x mandatory; 
    display: flex; align-items: flex-end;
    -webkit-overflow-scrolling: touch; 
    scrollbar-width: none;
}

.grid-container { 
    position: relative; 
    flex-shrink: 0; 
    box-sizing: content-box;
    display: flex;
}
svg { position: absolute; top: 0; left: 0; overflow: visible; pointer-events: none; }

.cell { 
    position: absolute; width: 24px; height: 24px; border-radius: 6px; 
    display: flex; align-items: center; justify-content: center; 
    font-size: 10px; font-weight: 600; z-index: 5; background: var(--bg-card); color: #9aa0a6; 
    cursor: pointer; line-height: 1; transition: background-color 0.2s;
}
.cell.is-light { color: #333 !important; }
.cell.is-dark { color: #fff !important; }

/* FIX: Söndagar alltid röda med hög prioritet */
.cell.is-sunday { 
    color: var(--color-sunday) !important; 
    font-weight: 800; 
}

.cell.is-today { outline: 2px solid var(--color-primary); outline-offset: 1px; z-index: 10; }
.cell.is-disabled { opacity: 0.3; pointer-events: none; }

.snap-guide { 
    position: absolute; top: 0; bottom: 0; width: 1px; 
    scroll-snap-align: center; 
    pointer-events: none; opacity: 0; 
}

/* FIX: Månadslinjer & Fyllning */
.month-bg { 
    stroke: var(--month-stroke); 
    stroke-width: 1.5px; 
    stroke-linejoin: round; 
    /* Fill sätts nu dynamiskt i Grid.svelte eller via klasser nedan */
}
.month-bg.even { fill: var(--month-even); }
.month-bg.odd { fill: var(--month-odd); }